<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bookshelf Web App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-in-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                    },
                },
            },
        }
    </script>
    <style>
        .modal {
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .carousel-item {
            transition: transform 0.5s ease-in-out;
        }
        [x-cloak] { display: none !important; }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300">
    <div class="min-h-screen flex flex-col" x-data="{ 
        darkMode: localStorage.getItem('darkMode') === 'true',
        activeTab: 'books',
        books: [],
        showAddModal: false,
        showEditModal: false,
        showDetailModal: false,
        currentBook: null,
        currentIndex: 0,
        searchQuery: '',
        bulkData: null,
        bulkPosters: [],
        bulkGallery: [],
        bookData: [],
        showBulkModal: false,
        bulkMappings: [],
        genres: ['Fantasy', 'Science Fiction', 'Mystery', 'Thriller', 'Romance', 'Horror', 'Historical Fiction', 'Biography', 'Self-Help', 'Manga', 'Comics', 'Light Novel', 'Web Novel', 'Non-Fiction', 'Other'],
        
        init() {
            if (this.darkMode || (!('darkMode' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                this.darkMode = true;
            }
            
            this.loadBooks();
            this.loadPosters();
            this.loadGallery();
            this.loadBookData();
            
            this.$watch('darkMode', val => {
                localStorage.setItem('darkMode', val);
                if (val) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            });
        },
        
        loadBooks() {
            const storedBooks = localStorage.getItem('books');
            this.books = storedBooks ? JSON.parse(storedBooks) : [];
        },
        
        loadPosters() {
            const storedPosters = localStorage.getItem('posters');
            this.bulkPosters = storedPosters ? JSON.parse(storedPosters) : [];
        },
        
        loadGallery() {
            const storedGallery = localStorage.getItem('gallery');
            this.bulkGallery = storedGallery ? JSON.parse(storedGallery) : [];
        },
        
        loadBookData() {
            const storedBookData = localStorage.getItem('bookData');
            this.bookData = storedBookData ? JSON.parse(storedBookData) : [];
        },
        
        saveBooks() {
            localStorage.setItem('books', JSON.stringify(this.books));
        },
        
        savePosters() {
            localStorage.setItem('posters', JSON.stringify(this.bulkPosters));
        },
        
        saveGallery() {
            localStorage.setItem('gallery', JSON.stringify(this.bulkGallery));
        },
        
        saveBookData() {
            localStorage.setItem('bookData', JSON.stringify(this.bookData));
        },
        
        addBook(book) {
            this.books.push(book);
            this.saveBooks();
            this.showAddModal = false;
        },
        
        updateBook(index, book) {
            this.books[index] = book;
            this.saveBooks();
            this.showEditModal = false;
        },
        
        deleteBook(index) {
            if (confirm('Are you sure you want to delete this book?')) {
                this.books.splice(index, 1);
                this.saveBooks();
                this.showDetailModal = false;
            }
        },
        
        deleteAllBooks() {
            if (confirm('Are you sure you want to delete ALL books? This cannot be undone.')) {
                this.books = [];
                this.saveBooks();
            }
        },
        
        openEditModal(index) {
            this.currentBook = {...this.books[index]};
            this.currentIndex = index;
            this.showEditModal = true;
        },
        
        openDetailModal(index) {
            this.currentBook = this.books[index];
            this.currentIndex = index;
            this.showDetailModal = true;
        },
        
        filteredBooks() {
            if (!this.searchQuery) return this.books;
            const query = this.searchQuery.toLowerCase();
            return this.books.filter(book => 
                book.name.toLowerCase().includes(query) || 
                (book.genre && book.genre.toLowerCase().includes(query)) ||
                book.status.toLowerCase().includes(query)
            );
        },
        
        handleBulkUpload() {
            if (!this.bulkData) {
                alert('Please upload book data first');
                return;
            }
            
            // Prepare mappings for UI
            this.bulkMappings = this.bulkData.map(book => ({
                book: book,
                poster: null,
                gallery: [],
                bookDataFile: null
            }));
            
            this.showBulkModal = true;
        },
        
        completeBulkUpload() {
            // Add all mapped books to the collection
            this.bulkMappings.forEach(mapping => {
                this.books.push({
                    ...mapping.book,
                    poster: mapping.poster,
                    gallery: mapping.gallery,
                    bookDataFile: mapping.bookDataFile
                });
            });
            
            this.saveBooks();
            this.bulkData = null;
            this.showBulkModal = false;
        }
    }" x-cloak>
        <!-- Header -->
        <header class="bg-white dark:bg-gray-800 shadow">
            <div class="container mx-auto px-4 py-6 flex flex-col md:flex-row items-center justify-between">
                <div class="flex items-center mb-4 md:mb-0">
                    <i class="fas fa-book-open text-primary-600 dark:text-primary-400 text-3xl mr-3"></i>
                    <h1 class="text-2xl font-bold">Bookshelf App</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button @click="darkMode = !darkMode" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                        <i class="fas" :class="darkMode ? 'fa-sun' : 'fa-moon'"></i>
                    </button>
                    <div class="relative">
                        <input 
                            type="text" 
                            x-model="searchQuery" 
                            placeholder="Search books..." 
                            class="pl-10 pr-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500"
                        >
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <div class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
            <div class="container mx-auto px-4">
                <nav class="flex space-x-4">
                    <button 
                        @click="activeTab = 'books'" 
                        :class="activeTab === 'books' ? 'border-primary-500 text-primary-600 dark:text-primary-400' : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'"
                        class="py-4 px-1 border-b-2 font-medium text-sm sm:text-base transition-colors"
                    >
                        <i class="fas fa-book mr-2"></i> Books
                    </button>
                    <button 
                        @click="activeTab = 'data'" 
                        :class="activeTab === 'data' ? 'border-primary-500 text-primary-600 dark:text-primary-400' : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'"
                        class="py-4 px-1 border-b-2 font-medium text-sm sm:text-base transition-colors"
                    >
                        <i class="fas fa-table mr-2"></i> Data Manager
                    </button>
                </nav>
            </div>
        </div>

        <!-- Main Content -->
        <main class="flex-grow container mx-auto px-4 py-8">
            <!-- Books Tab -->
            <div x-show="activeTab === 'books'" class="animate-fade-in">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-semibold">My Books Collection</h2>
                    <button 
                        @click="showAddModal = true" 
                        class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center"
                    >
                        <i class="fas fa-plus mr-2"></i> Add Book
                    </button>
                </div>

                <!-- Books Grid -->
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
                    <template x-for="(book, index) in filteredBooks()" :key="index">
                        <div 
                            @click="openDetailModal(index)"
                            class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden cursor-pointer transform hover:scale-105 transition-transform hover:shadow-lg animate-slide-up"
                        >
                            <div class="relative pb-[140%]">
                                <template x-if="book.poster">
                                    <img :src="book.poster" class="absolute inset-0 w-full h-full object-cover" alt="Book cover">
                                </template>
                                <template x-if="!book.poster">
                                    <div class="absolute inset-0 w-full h-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center">
                                        <i class="fas fa-book text-4xl text-gray-400 dark:text-gray-500"></i>
                                    </div>
                                </template>
                                <div class="absolute top-2 right-2">
                                    <span 
                                        class="px-2 py-1 text-xs rounded-full font-medium"
                                        :class="{
                                            'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200': book.status === 'Completed',
                                            'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200': book.status === 'Ongoing',
                                            'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200': book.status === 'Hiatus'
                                        }"
                                        x-text="book.status"
                                    ></span>
                                </div>
                            </div>
                            <div class="p-4">
                                <h3 class="font-semibold text-lg truncate" x-text="book.name"></h3>
                                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1" x-text="book.genre || 'No genre'"></p>
                                <template x-if="book.chapterNumber">
                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1">
                                        <i class="fas fa-list-ol mr-1"></i>
                                        <span x-text="'Chapter ' + book.chapterNumber"></span>
                                    </p>
                                </template>
                            </div>
                        </div>
                    </template>

                    <!-- Empty State -->
                    <template x-if="filteredBooks().length === 0">
                        <div class="col-span-full py-12 flex flex-col items-center justify-center text-center">
                            <i class="fas fa-books text-gray-300 dark:text-gray-700 text-5xl mb-4"></i>
                            <h3 class="text-xl font-medium text-gray-600 dark:text-gray-400 mb-2">No books found</h3>
                            <p class="text-gray-500 dark:text-gray-500 max-w-md mb-6">
                                <template x-if="searchQuery">
                                    No books match your search criteria. Try a different search or add a new book.
                                </template>
                                <template x-if="!searchQuery">
                                    Your bookshelf is empty. Start by adding your first book or import a collection.
                                </template>
                            </p>
                            <div class="flex space-x-4">
                                <button 
                                    @click="showAddModal = true" 
                                    class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition-colors"
                                >
                                    <i class="fas fa-plus mr-2"></i> Add Book
                                </button>
                                <button 
                                    @click="activeTab = 'data'" 
                                    class="bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors"
                                >
                                    <i class="fas fa-file-import mr-2"></i> Import Books
                                </button>
                            </div>
                        </div>
                    </template>
                </div>
            </div>

            <!-- Data Manager Tab -->
            <div x-show="activeTab === 'data'" class="animate-fade-in">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 space-y-4 md:space-y-0">
                    <h2 class="text-xl font-semibold">Data Manager</h2>
                    <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3">
                        <button 
                            @click="handleBulkUpload()" 
                            class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center"
                        >
                            <i class="fas fa-file-import mr-2"></i> Process Bulk Upload
                        </button>
                        <button 
                            @click="deleteAllBooks()" 
                            class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center"
                        >
                            <i class="fas fa-trash-alt mr-2"></i> Delete All
                        </button>
                    </div>
                </div>

                <!-- Bulk Upload Section -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8">
                    <h3 class="text-lg font-medium mb-4">Bulk Upload</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <!-- Book Data Upload -->
                        <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                            <h4 class="font-medium mb-2">Book Data (JSON/CSV)</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Upload a JSON or CSV file with book details</p>
                            
                            <div class="relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center">
                                <input 
                                    type="file" 
                                    id="bulkDataUpload" 
                                    accept=".json,.csv" 
                                    class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                                    @change="
                                        const file = $event.target.files[0];
                                        if (!file) return;
                                        
                                        const reader = new FileReader();
                                        reader.onload = (e) => {
                                            try {
                                                if (file.name.endsWith('.json')) {
                                                    bulkData = JSON.parse(e.target.result);
                                                } else if (file.name.endsWith('.csv')) {
                                                    // Simple CSV parsing
                                                    const lines = e.target.result.split('\\n');
                                                    const headers = lines[0].split(',');
                                                    bulkData = lines.slice(1).map(line => {
                                                        if (!line.trim()) return null;
                                                        const values = line.split(',');
                                                        const obj = {};
                                                        headers.forEach((header, i) => {
                                                            obj[header.trim()] = values[i]?.trim() || '';
                                                        });
                                                        return obj;
                                                    }).filter(item => item);
                                                }
                                            } catch (err) {
                                                alert('Error parsing file: ' + err.message);
                                                bulkData = null;
                                            }
                                        };
                                        
                                        if (file.name.endsWith('.json')) {
                                            reader.readAsText(file);
                                        } else if (file.name.endsWith('.csv')) {
                                            reader.readAsText(file);
                                        } else {
                                            alert('Please upload a JSON or CSV file');
                                        }
                                    "
                                >
                                <div class="space-y-2">
                                    <i class="fas fa-file-upload text-gray-400 text-2xl"></i>
                                    <p class="text-sm">Drag & drop or click to upload</p>
                                </div>
                            </div>
                            
                            <div class="mt-3 text-sm" x-show="bulkData">
                                <span class="text-green-600 dark:text-green-400">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    <span x-text="bulkData ? `${bulkData.length} books loaded` : ''"></span>
                                </span>
                            </div>
                        </div>
                        
                        <!-- Poster Images Upload -->
                        <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                            <h4 class="font-medium mb-2">Poster Images</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Upload poster images for your books</p>
                            
                            <div class="relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center">
                                <input 
                                    type="file" 
                                    id="bulkPosterUpload" 
                                    accept="image/*,.pdf" 
                                    multiple
                                    class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                                    @change="
                                        const files = Array.from($event.target.files);
                                        if (files.length === 0) return;
                                        
                                        // Clear previous posters if needed
                                        if ($event.target.getAttribute('data-reset') === 'true') {
                                            bulkPosters = [];
                                            $event.target.removeAttribute('data-reset');
                                        }
                                        
                                        const promises = files.map(file => {
                                            return new Promise((resolve) => {
                                                const reader = new FileReader();
                                                reader.onload = (e) => {
                                                    resolve({
                                                        name: file.name,
                                                        type: file.type,
                                                        data: e.target.result
                                                    });
                                                };
                                                reader.readAsDataURL(file);
                                            });
                                        });
                                        
                                        Promise.all(promises).then(results => {
                                            bulkPosters = [...bulkPosters, ...results];
                                            savePosters();
                                        });
                                    "
                                >
                                <div class="space-y-2">
                                    <i class="fas fa-images text-gray-400 text-2xl"></i>
                                    <p class="text-sm">Drag & drop or click to upload</p>
                                </div>
                            </div>
                            
                            <div class="mt-3 flex justify-between items-center" x-show="bulkPosters.length > 0">
                                <span class="text-green-600 dark:text-green-400 text-sm">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    <span x-text="`${bulkPosters.length} posters loaded`"></span>
                                </span>
                                <button 
                                    @click="
                                        bulkPosters = [];
                                        savePosters();
                                        document.getElementById('bulkPosterUpload').setAttribute('data-reset', 'true');
                                    "
                                    class="text-xs text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300"
                                >
                                    Clear All
                                </button>
                            </div>
                            
                            <div class="mt-3 grid grid-cols-4 gap-2" x-show="bulkPosters.length > 0">
                                <template x-for="(poster, index) in bulkPosters.slice(0, 8)" :key="index">
                                    <div class="relative group h-12 w-full">
                                        <img :src="poster.data" class="h-full w-full object-cover rounded" :alt="poster.name">
                                        <div class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                                            <button 
                                                @click.stop="bulkPosters.splice(index, 1); savePosters();"
                                                class="text-white text-xs bg-red-600 rounded-full w-5 h-5 flex items-center justify-center"
                                            >
                                                <i class="fas fa-times"></i>
                                            </button>
                                        </div>
                                    </div>
                                </template>
                                <template x-if="bulkPosters.length > 8">
                                    <div class="h-12 w-full bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center text-gray-600 dark:text-gray-400 text-xs">
                                        <span x-text="`+${bulkPosters.length - 8} more`"></span>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <!-- Gallery Images Upload -->
                        <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                            <h4 class="font-medium mb-2">Gallery Images</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Upload additional images for your books</p>
                            
                            <div class="relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center">
                                <input 
                                    type="file" 
                                    id="bulkGalleryUpload" 
                                    accept="image/*,.pdf" 
                                    multiple
                                    class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                                    @change="
                                        const files = Array.from($event.target.files);
                                        if (files.length === 0) return;
                                        
                                        // Clear previous gallery if needed
                                        if ($event.target.getAttribute('data-reset') === 'true') {
                                            bulkGallery = [];
                                            $event.target.removeAttribute('data-reset');
                                        }
                                        
                                        const promises = files.map(file => {
                                            return new Promise((resolve) => {
                                                const reader = new FileReader();
                                                reader.onload = (e) => {
                                                    resolve({
                                                        name: file.name,
                                                        type: file.type,
                                                        data: e.target.result
                                                    });
                                                };
                                                reader.readAsDataURL(file);
                                            });
                                        });
                                        
                                        Promise.all(promises).then(results => {
                                            bulkGallery = [...bulkGallery, ...results];
                                            saveGallery();
                                        });
                                    "
                                >
                                <div class="space-y-2">
                                    <i class="fas fa-photo-film text-gray-400 text-2xl"></i>
                                    <p class="text-sm">Drag & drop or click to upload</p>
                                </div>
                            </div>
                            
                            <div class="mt-3 flex justify-between items-center" x-show="bulkGallery.length > 0">
                                <span class="text-green-600 dark:text-green-400 text-sm">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    <span x-text="`${bulkGallery.length} gallery images loaded`"></span>
                                </span>
                                <button 
                                    @click="
                                        bulkGallery = [];
                                        saveGallery();
                                        document.getElementById('bulkGalleryUpload').setAttribute('data-reset', 'true');
                                    "
                                    class="text-xs text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300"
                                >
                                    Clear All
                                </button>
                            </div>
                            
                            <div class="mt-3 grid grid-cols-4 gap-2" x-show="bulkGallery.length > 0">
                                <template x-for="(image, index) in bulkGallery.slice(0, 8)" :key="index">
                                    <div class="relative group h-12 w-full">
                                        <img :src="image.data" class="h-full w-full object-cover rounded" :alt="image.name">
                                        <div class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                                            <button 
                                                @click.stop="bulkGallery.splice(index, 1); saveGallery();"
                                                class="text-white text-xs bg-red-600 rounded-full w-5 h-5 flex items-center justify-center"
                                            >
                                                <i class="fas fa-times"></i>
                                            </button>
                                        </div>
                                    </div>
                                </template>
                                <template x-if="bulkGallery.length > 8">
                                    <div class="h-12 w-full bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center text-gray-600 dark:text-gray-400 text-xs">
                                        <span x-text="`+${bulkGallery.length - 8} more`"></span>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <!-- Book Data Files Upload -->
                        <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                            <h4 class="font-medium mb-2">Book Data Files</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Upload text or PDF files for your books</p>
                            
                            <div class="relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center">
                                <input 
                                    type="file" 
                                    id="bookDataUpload" 
                                    accept=".txt,.pdf" 
                                    multiple
                                    class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                                    @change="
                                        const files = Array.from($event.target.files);
                                        if (files.length === 0) return;
                                        
                                        // Clear previous data if needed
                                        if ($event.target.getAttribute('data-reset') === 'true') {
                                            bookData = [];
                                            $event.target.removeAttribute('data-reset');
                                        }
                                        
                                        const promises = files.map(file => {
                                            return new Promise((resolve) => {
                                                const reader = new FileReader();
                                                reader.onload = (e) => {
                                                    resolve({
                                                        name: file.name,
                                                        type: file.type,
                                                        data: e.target.result
                                                    });
                                                };
                                                reader.readAsDataURL(file);
                                            });
                                        });
                                        
                                        Promise.all(promises).then(results => {
                                            bookData = [...bookData, ...results];
                                            saveBookData();
                                        });
                                    "
                                >
                                <div class="space-y-2">
                                    <i class="fas fa-file-alt text-gray-400 text-2xl"></i>
                                    <p class="text-sm">Drag & drop or click to upload</p>
                                </div>
                            </div>
                            
                            <div class="mt-3 flex justify-between items-center" x-show="bookData.length > 0">
                                <span class="text-green-600 dark:text-green-400 text-sm">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    <span x-text="`${bookData.length} data files loaded`"></span>
                                </span>
                                <button 
                                    @click="
                                        bookData = [];
                                        saveBookData();
                                        document.getElementById('bookDataUpload').setAttribute('data-reset', 'true');
                                    "
                                    class="text-xs text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300"
                                >
                                    Clear All
                                </button>
                            </div>
                            
                            <div class="mt-3 space-y-2" x-show="bookData.length > 0">
                                <template x-for="(file, index) in bookData.slice(0, 5)" :key="index">
                                    <div class="flex items-center justify-between bg-gray-100 dark:bg-gray-700 p-2 rounded">
                                        <div class="flex items-center">
                                            <i class="fas" :class="file.type.includes('pdf') ? 'fa-file-pdf text-red-500' : 'fa-file-alt text-blue-500'"></i>
                                            <span class="ml-2 text-sm truncate" x-text="file.name"></span>
                                        </div>
                                        <button 
                                            @click.stop="bookData.splice(index, 1); saveBookData();"
                                            class="text-red-600 hover:text-red-800"
                                        >
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </template>
                                <template x-if="bookData.length > 5">
                                    <div class="text-center text-sm text-gray-500">
                                        <span x-text="`+${bookData.length - 5} more files`"></span>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Books Data Table -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                            <thead class="bg-gray-50 dark:bg-gray-900">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Book</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Genre</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Chapter</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Source</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Media</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                <template x-for="(book, index) in books" :key="index">
                                    <tr class="hover:bg-gray-50 dark:hover:bg-gray-750">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="h-10 w-10 flex-shrink-0">
                                                    <template x-if="book.poster">
                                                        <img class="h-10 w-10 rounded-sm object-cover" :src="book.poster" alt="">
                                                    </template>
                                                    <template x-if="!book.poster">
                                                        <div class="h-10 w-10 rounded-sm bg-gray-200 dark:bg-gray-700 flex items-center justify-center">
                                                            <i class="fas fa-book text-gray-400"></i>
                                                        </div>
                                                    </template>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium" x-text="book.name"></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span 
                                                class="px-2 py-1 text-xs rounded-full font-medium"
                                                :class="{
                                                    'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200': book.status === 'Completed',
                                                    'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200': book.status === 'Ongoing',
                                                    'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200': book.status === 'Hiatus'
                                                }"
                                                x-text="book.status"
                                            ></span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400" x-text="book.genre || 'N/A'"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            <span x-text="book.chapterNumber || 'N/A'"></span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            <template x-if="book.source">
                                                <a :href="book.source" target="_blank" class="text-primary-600 dark:text-primary-400 hover:underline">
                                                    <i class="fas fa-external-link-alt mr-1"></i>
                                                    <span>Link</span>
                                                </a>
                                            </template>
                                            <template x-if="!book.source">
                                                <span>N/A</span>
                                            </template>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            <div class="flex items-center space-x-1">
                                                <template x-if="book.poster">
                                                    <i class="fas fa-image text-green-500"></i>
                                                </template>
                                                <template x-if="!book.poster">
                                                    <i class="fas fa-image text-gray-400"></i>
                                                </template>
                                                
                                                <template x-if="book.gallery && book.gallery.length > 0">
                                                    <span class="text-green-500">
                                                        <i class="fas fa-photo-film"></i>
                                                        <span x-text="book.gallery.length"></span>
                                                    </span>
                                                </template>
                                                <template x-if="!book.gallery || book.gallery.length === 0">
                                                    <i class="fas fa-photo-film text-gray-400"></i>
                                                </template>
                                                
                                                <template x-if="book.bookDataFile">
                                                    <i class="fas fa-file-alt text-green-500 ml-1"></i>
                                                </template>
                                                <template x-if="!book.bookDataFile">
                                                    <i class="fas fa-file-alt text-gray-400 ml-1"></i>
                                                </template>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                            <button 
                                                @click.stop="openEditModal(index)" 
                                                class="text-primary-600 dark:text-primary-400 hover:text-primary-900 dark:hover:text-primary-300 mr-3"
                                            >
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button 
                                                @click.stop="deleteBook(index)" 
                                                class="text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300"
                                            >
                                                <i class="fas fa-trash-alt"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </template>
                                
                                <!-- Empty State -->
                                <template x-if="books.length === 0">
                                    <tr>
                                        <td colspan="7" class="px-6 py-10 text-center text-gray-500 dark:text-gray-400">
                                            <p class="mb-2">No books in your collection yet</p>
                                            <button 
                                                @click="showAddModal = true" 
                                                class="text-primary-600 dark:text-primary-400 hover:underline"
                                            >
                                                Add your first book
                                            </button>
                                        </td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>

        <!-- Add Book Modal -->
        <div 
            x-show="showAddModal" 
            class="fixed inset-0 z-50 overflow-y-auto"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
        >
            <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
                <div 
                    @click="showAddModal = false" 
                    class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75 dark:bg-gray-900 dark:bg-opacity-75"
                ></div>

                <div 
                    class="inline-block w-full max-w-2xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white dark:bg-gray-800 rounded-lg shadow-xl"
                    x-data="{
                        newBook: {
                            name: '',
                            description: '',
                            chapterNumber: '',
                            status: 'Ongoing',
                            genre: '',
                            source: '',
                            poster: null,
                            gallery: [],
                            bookDataFile: null
                        },
                        
                        submitForm() {
                            if (!this.newBook.name) {
                                alert('Book name is required');
                                return;
                            }
                            
                            addBook({...this.newBook});
                            
                            // Reset form
                            this.newBook = {
                                name: '',
                                description: '',
                                chapterNumber: '',
                                status: 'Ongoing',
                                genre: '',
                                source: '',
                                poster: null,
                                gallery: [],
                                bookDataFile: null
                            };
                        },
                        
                        handlePosterUpload(event) {
                            const file = event.target.files[0];
                            if (!file) return;
                            
                            const reader = new FileReader();
                            reader.onload = (e) => {
                                this.newBook.poster = e.target.result;
                            };
                            reader.readAsDataURL(file);
                        },
                        
                        handleGalleryUpload(event) {
                            const files = Array.from(event.target.files);
                            
                            files.forEach(file => {
                                const reader = new FileReader();
                                reader.onload = (e) => {
                                    this.newBook.gallery.push(e.target.result);
                                };
                                reader.readAsDataURL(file);
                            });
                        },
                        
                        handleBookDataUpload(event) {
                            const file = event.target.files[0];
                            if (!file) return;
                            
                            const reader = new FileReader();
                            reader.onload = (e) => {
                                this.newBook.bookDataFile = {
                                    name: file.name,
                                    type: file.type,
                                    data: e.target.result
                                };
                            };
                            reader.readAsDataURL(file);
                        },
                        
                        removeGalleryImage(index) {
                            this.newBook.gallery.splice(index, 1);
                        }
                    }"
                >
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-medium">Add New Book</h3>
                        <button @click="showAddModal = false" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <!-- Book Name -->
                            <div>
                                <label for="bookName" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Book Name *</label>
                                <input 
                                    type="text" 
                                    id="bookName" 
                                    x-model="newBook.name" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                    required
                                >
                            </div>
                            
                            <!-- Genre -->
                            <div>
                                <label for="bookGenre" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Genre</label>
                                <select 
                                    id="bookGenre" 
                                    x-model="newBook.genre" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                >
                                    <option value="">Select a genre</option>
                                    <template x-for="genre in genres" :key="genre">
                                        <option :value="genre" x-text="genre"></option>
                                    </template>
                                </select>
                            </div>
                            
                            <!-- Status -->
                            <div>
                                <label for="bookStatus" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Status</label>
                                <select 
                                    id="bookStatus" 
                                    x-model="newBook.status" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                >
                                    <option value="Completed">Completed</option>
                                    <option value="Ongoing">Ongoing</option>
                                    <option value="Hiatus">Hiatus</option>
                                </select>
                            </div>
                            
                            <!-- Chapter Number -->
                            <div>
                                <label for="chapterNumber" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Chapter Number</label>
                                <input 
                                    type="text" 
                                    id="chapterNumber" 
                                    x-model="newBook.chapterNumber" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                    placeholder="e.g. 42"
                                >
                            </div>
                            
                            <!-- Source Link -->
                            <div>
                                <label for="sourceLink" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Source Link</label>
                                <input 
                                    type="url" 
                                    id="sourceLink" 
                                    x-model="newBook.source" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                    placeholder="https://example.com/read/book"
                                >
                            </div>
                            
                            <!-- Description -->
                            <div>
                                <label for="bookDescription" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description</label>
                                <textarea 
                                    id="bookDescription" 
                                    x-model="newBook.description" 
                                    rows="3" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                ></textarea>
                            </div>
                            
                            <!-- Book Data File -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Book Data File</label>
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-md overflow-hidden flex items-center justify-center">
                                        <template x-if="newBook.bookDataFile">
                                            <i class="fas" :class="newBook.bookDataFile.type.includes('pdf') ? 'fa-file-pdf text-red-500' : 'fa-file-alt text-blue-500'"></i>
                                        </template>
                                        <template x-if="!newBook.bookDataFile">
                                            <i class="fas fa-file-alt text-gray-400"></i>
                                        </template>
                                    </div>
                                    <div class="flex-1">
                                        <label class="block w-full px-4 py-2 text-sm text-center text-white bg-primary-600 rounded-md cursor-pointer hover:bg-primary-700">
                                            <span>Upload Data File</span>
                                            <input type="file" class="hidden" accept=".txt,.pdf" @change="handleBookDataUpload">
                                        </label>
                                        <div class="mt-1 text-sm" x-show="newBook.bookDataFile">
                                            <span x-text="newBook.bookDataFile?.name"></span>
                                            <button 
                                                @click="newBook.bookDataFile = null" 
                                                class="ml-2 text-red-600 hover:text-red-800"
                                            >
                                                <i class="fas fa-times"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            <!-- Poster Upload -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Poster Image</label>
                                <div class="flex items-center space-x-4">
                                    <div class="w-24 h-32 bg-gray-200 dark:bg-gray-700 rounded-md overflow-hidden flex items-center justify-center">
                                        <template x-if="newBook.poster">
                                            <img :src="newBook.poster" class="w-full h-full object-cover" alt="Book poster">
                                        </template>
                                        <template x-if="!newBook.poster">
                                            <i class="fas fa-image text-gray-400 text-2xl"></i>
                                        </template>
                                    </div>
                                    <div class="flex-1">
                                        <label class="block w-full px-4 py-2 text-sm text-center text-white bg-primary-600 rounded-md cursor-pointer hover:bg-primary-700">
                                            <span>Upload Poster</span>
                                            <input type="file" class="hidden" accept="image/*,.pdf" @change="handlePosterUpload">
                                        </label>
                                        <button 
                                            x-show="newBook.poster" 
                                            @click="newBook.poster = null" 
                                            class="w-full mt-2 px-4 py-2 text-sm text-center text-gray-700 dark:text-gray-200 bg-gray-200 dark:bg-gray-700 rounded-md cursor-pointer hover:bg-gray-300 dark:hover:bg-gray-600"
                                        >
                                            Remove
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Gallery Upload -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Gallery Images</label>
                                
                                <div class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center mb-3">
                                    <label class="cursor-pointer">
                                        <span class="text-gray-600 dark:text-gray-400">Drag & drop or click to upload</span>
                                        <input type="file" class="hidden" accept="image/*,.pdf" multiple @change="handleGalleryUpload">
                                    </label>
                                </div>
                                
                                <div class="grid grid-cols-3 gap-2" x-show="newBook.gallery.length > 0">
                                    <template x-for="(img, index) in newBook.gallery" :key="index">
                                        <div class="relative group">
                                            <img :src="img" class="w-full h-20 object-cover rounded-md" alt="Gallery image">
                                            <button 
                                                @click="removeGalleryImage(index)" 
                                                class="absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"
                                            >
                                                <i class="fas fa-times text-xs"></i>
                                            </button>
                                        </div>
                                    </template>
                                </div>
                            </div>
                            
                            <!-- Poster Selection from Library -->
                            <div x-show="bulkPosters.length > 0">
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Select from Poster Library</label>
                                <select 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                    @change="newBook.poster = $event.target.value"
                                >
                                    <option value="">Select a poster</option>
                                    <template x-for="poster in bulkPosters" :key="poster.name">
                                        <option :value="poster.data" x-text="poster.name"></option>
                                    </template>
                                </select>
                            </div>
                            
                            <!-- Gallery Selection from Library -->
                            <div x-show="bulkGallery.length > 0">
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Select from Gallery Library</label>
                                <select 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                    multiple
                                    size="3"
                                    @change="
                                        newBook.gallery = Array.from($event.target.selectedOptions).map(option => option.value);
                                    "
                                >
                                    <template x-for="gallery in bulkGallery" :key="gallery.name">
                                        <option :value="gallery.data" x-text="gallery.name"></option>
                                    </template>
                                </select>
                            </div>
                            
                            <!-- Book Data Selection from Library -->
                            <div x-show="bookData.length > 0">
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Select from Book Data Library</label>
                                <select 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                    @change="
                                        const selectedIndex = $event.target.selectedIndex - 1;
                                        if (selectedIndex >= 0) {
                                            newBook.bookDataFile = bookData[selectedIndex];
                                        } else {
                                            newBook.bookDataFile = null;
                                        }
                                    "
                                >
                                    <option value="">Select a data file</option>
                                    <template x-for="file in bookData" :key="file.name">
                                        <option :value="file.name" x-text="file.name"></option>
                                    </template>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-end space-x-3">
                        <button 
                            @click="showAddModal = false" 
                            class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-gray-200 dark:bg-gray-700 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none"
                        >
                            Cancel
                        </button>
                        <button 
                            @click="submitForm" 
                            class="px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none"
                        >
                            Add Book
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Edit Book Modal -->
        <div 
            x-show="showEditModal" 
            class="fixed inset-0 z-50 overflow-y-auto"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
        >
            <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
                <div 
                    @click="showEditModal = false" 
                    class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75 dark:bg-gray-900 dark:bg-opacity-75"
                ></div>

                <div 
                    class="inline-block w-full max-w-2xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white dark:bg-gray-800 rounded-lg shadow-xl"
                    x-data="{
                        submitForm() {
                            if (!currentBook.name) {
                                alert('Book name is required');
                                return;
                            }
                            
                            updateBook(currentIndex, {...currentBook});
                        },
                        
                        handlePosterUpload(event) {
                            const file = event.target.files[0];
                            if (!file) return;
                            
                            const reader = new FileReader();
                            reader.onload = (e) => {
                                currentBook.poster = e.target.result;
                            };
                            reader.readAsDataURL(file);
                        },
                        
                        handleGalleryUpload(event) {
                            const files = Array.from(event.target.files);
                            
                            if (!currentBook.gallery) {
                                currentBook.gallery = [];
                            }
                            
                            files.forEach(file => {
                                const reader = new FileReader();
                                reader.onload = (e) => {
                                    currentBook.gallery.push(e.target.result);
                                };
                                reader.readAsDataURL(file);
                            });
                        },
                        
                        handleBookDataUpload(event) {
                            const file = event.target.files[0];
                            if (!file) return;
                            
                            const reader = new FileReader();
                            reader.onload = (e) => {
                                currentBook.bookDataFile = {
                                    name: file.name,
                                    type: file.type,
                                    data: e.target.result
                                };
                            };
                            reader.readAsDataURL(file);
                        },
                        
                        removeGalleryImage(index) {
                            currentBook.gallery.splice(index, 1);
                        }
                    }"
                >
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-medium">Edit Book</h3>
                        <button @click="showEditModal = false" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <!-- Book Name -->
                            <div>
                                <label for="editBookName" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Book Name *</label>
                                <input 
                                    type="text" 
                                    id="editBookName" 
                                    x-model="currentBook.name" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                    required
                                >
                            </div>
                            
                            <!-- Genre -->
                            <div>
                                <label for="editBookGenre" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Genre</label>
                                <select 
                                    id="editBookGenre" 
                                    x-model="currentBook.genre" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                >
                                    <option value="">Select a genre</option>
                                    <template x-for="genre in genres" :key="genre">
                                        <option :value="genre" x-text="genre"></option>
                                    </template>
                                </select>
                            </div>
                            
                            <!-- Status -->
                            <div>
                                <label for="editBookStatus" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Status</label>
                                <select 
                                    id="editBookStatus" 
                                    x-model="currentBook.status" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                >
                                    <option value="Completed">Completed</option>
                                    <option value="Ongoing">Ongoing</option>
                                    <option value="Hiatus">Hiatus</option>
                                </select>
                            </div>
                            
                            <!-- Chapter Number -->
                            <div>
                                <label for="editChapterNumber" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Chapter Number</label>
                                <input 
                                    type="text" 
                                    id="editChapterNumber" 
                                    x-model="currentBook.chapterNumber" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                    placeholder="e.g. 42"
                                >
                            </div>
                            
                            <!-- Source Link -->
                            <div>
                                <label for="editSourceLink" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Source Link</label>
                                <input 
                                    type="url" 
                                    id="editSourceLink" 
                                    x-model="currentBook.source" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                    placeholder="https://example.com/read/book"
                                >
                            </div>
                            
                            <!-- Description -->
                            <div>
                                <label for="editBookDescription" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description</label>
                                <textarea 
                                    id="editBookDescription" 
                                    x-model="currentBook.description" 
                                    rows="3" 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                ></textarea>
                            </div>
                            
                            <!-- Book Data File -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Book Data File</label>
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-md overflow-hidden flex items-center justify-center">
                                        <template x-if="currentBook.bookDataFile">
                                            <i class="fas" :class="currentBook.bookDataFile.type.includes('pdf') ? 'fa-file-pdf text-red-500' : 'fa-file-alt text-blue-500'"></i>
                                        </template>
                                        <template x-if="!currentBook.bookDataFile">
                                            <i class="fas fa-file-alt text-gray-400"></i>
                                        </template>
                                    </div>
                                    <div class="flex-1">
                                        <label class="block w-full px-4 py-2 text-sm text-center text-white bg-primary-600 rounded-md cursor-pointer hover:bg-primary-700">
                                            <span>Upload Data File</span>
                                            <input type="file" class="hidden" accept=".txt,.pdf" @change="handleBookDataUpload">
                                        </label>
                                        <div class="mt-1 text-sm" x-show="currentBook.bookDataFile">
                                            <span x-text="currentBook.bookDataFile?.name"></span>
                                            <button 
                                                @click="currentBook.bookDataFile = null" 
                                                class="ml-2 text-red-600 hover:text-red-800"
                                            >
                                                <i class="fas fa-times"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            <!-- Poster Upload -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Poster Image</label>
                                <div class="flex items-center space-x-4">
                                    <div class="w-24 h-32 bg-gray-200 dark:bg-gray-700 rounded-md overflow-hidden flex items-center justify-center">
                                        <template x-if="currentBook.poster">
                                            <img :src="currentBook.poster" class="w-full h-full object-cover" alt="Book poster">
                                        </template>
                                        <template x-if="!currentBook.poster">
                                            <i class="fas fa-image text-gray-400 text-2xl"></i>
                                        </template>
                                    </div>
                                    <div class="flex-1">
                                        <label class="block w-full px-4 py-2 text-sm text-center text-white bg-primary-600 rounded-md cursor-pointer hover:bg-primary-700">
                                            <span>Upload Poster</span>
                                            <input type="file" class="hidden" accept="image/*,.pdf" @change="handlePosterUpload">
                                        </label>
                                        <button 
                                            x-show="currentBook.poster" 
                                            @click="currentBook.poster = null" 
                                            class="w-full mt-2 px-4 py-2 text-sm text-center text-gray-700 dark:text-gray-200 bg-gray-200 dark:bg-gray-700 rounded-md cursor-pointer hover:bg-gray-300 dark:hover:bg-gray-600"
                                        >
                                            Remove
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Gallery Upload -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Gallery Images</label>
                                
                                <div class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center mb-3">
                                    <label class="cursor-pointer">
                                        <span class="text-gray-600 dark:text-gray-400">Drag & drop or click to upload</span>
                                        <input type="file" class="hidden" accept="image/*,.pdf" multiple @change="handleGalleryUpload">
                                    </label>
                                </div>
                                
                                <div class="grid grid-cols-3 gap-2" x-show="currentBook.gallery && currentBook.gallery.length > 0">
                                    <template x-for="(img, index) in currentBook.gallery" :key="index">
                                        <div class="relative group">
                                            <img :src="img" class="w-full h-20 object-cover rounded-md" alt="Gallery image">
                                            <button 
                                                @click="removeGalleryImage(index)" 
                                                class="absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"
                                            >
                                                <i class="fas fa-times text-xs"></i>
                                            </button>
                                        </div>
                                    </template>
                                </div>
                            </div>
                            
                            <!-- Poster Selection from Library -->
                            <div x-show="bulkPosters.length > 0">
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Select from Poster Library</label>
                                <select 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                    @change="currentBook.poster = $event.target.value"
                                >
                                    <option value="">Select a poster</option>
                                    <template x-for="poster in bulkPosters" :key="poster.name">
                                        <option :value="poster.data" x-text="poster.name"></option>
                                    </template>
                                </select>
                            </div>
                            
                            <!-- Gallery Selection from Library -->
                            <div x-show="bulkGallery.length > 0">
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Select from Gallery Library</label>
                                <select 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                    multiple
                                    size="3"
                                    @change="
                                        if (!currentBook.gallery) currentBook.gallery = [];
                                        currentBook.gallery = Array.from($event.target.selectedOptions).map(option => option.value);
                                    "
                                >
                                    <template x-for="gallery in bulkGallery" :key="gallery.name">
                                        <option :value="gallery.data" x-text="gallery.name"></option>
                                    </template>
                                </select>
                            </div>
                            
                            <!-- Book Data Selection from Library -->
                            <div x-show="bookData.length > 0">
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Select from Book Data Library</label>
                                <select 
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                    @change="
                                        const selectedIndex = $event.target.selectedIndex - 1;
                                        if (selectedIndex >= 0) {
                                            currentBook.bookDataFile = bookData[selectedIndex];
                                        } else {
                                            currentBook.bookDataFile = null;
                                        }
                                    "
                                >
                                    <option value="">Select a data file</option>
                                    <template x-for="file in bookData" :key="file.name">
                                        <option :value="file.name" x-text="file.name"></option>
                                    </template>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-end space-x-3">
                        <button 
                            @click="showEditModal = false" 
                            class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-gray-200 dark:bg-gray-700 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none"
                        >
                            Cancel
                        </button>
                        <button 
                            @click="submitForm" 
                            class="px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none"
                        >
                            Save Changes
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Book Detail Modal -->
        <div 
            x-show="showDetailModal" 
            class="fixed inset-0 z-50 overflow-y-auto"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
        >
            <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
                <div 
                    @click="showDetailModal = false" 
                    class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75 dark:bg-gray-900 dark:bg-opacity-75"
                ></div>

                <div 
                    class="inline-block w-full max-w-4xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white dark:bg-gray-800 rounded-lg shadow-xl"
                    x-data="{
                        currentGalleryIndex: 0,
                        
                        nextGalleryImage() {
                            if (!currentBook.gallery || currentBook.gallery.length === 0) return;
                            this.currentGalleryIndex = (this.currentGalleryIndex + 1) % currentBook.gallery.length;
                        },
                        
                        prevGalleryImage() {
                            if (!currentBook.gallery || currentBook.gallery.length === 0) return;
                            this.currentGalleryIndex = (this.currentGalleryIndex - 1 + currentBook.gallery.length) % currentBook.gallery.length;
                        }
                    }"
                >
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-medium" x-text="currentBook?.name"></h3>
                        <button @click="showDetailModal = false" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <!-- Poster -->
                            <div class="bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden mb-4 aspect-[3/4]">
                                <template x-if="currentBook?.poster">
                                    <img :src="currentBook.poster" class="w-full h-full object-cover" alt="Book poster">
                                </template>
                                <template x-if="!currentBook?.poster">
                                    <div class="w-full h-full flex items-center justify-center">
                                        <i class="fas fa-book text-gray-400 text-5xl"></i>
                                    </div>
                                </template>
                            </div>
                            
                            <!-- Gallery -->
                            <div x-show="currentBook?.gallery && currentBook.gallery.length > 0" class="mb-4">
                                <h4 class="font-medium mb-2">Gallery</h4>
                                <div class="relative rounded-lg overflow-hidden aspect-video bg-gray-200 dark:bg-gray-700">
                                    <template x-if="currentBook?.gallery && currentBook.gallery.length > 0">
                                        <img 
                                            :src="currentBook.gallery[currentGalleryIndex]" 
                                            class="w-full h-full object-contain" 
                                            alt="Gallery image"
                                        >
                                    </template>
                                    
                                    <div class="absolute inset-0 flex items-center justify-between px-2">
                                        <button 
                                            @click="prevGalleryImage" 
                                            class="bg-black bg-opacity-50 hover:bg-opacity-70 text-white rounded-full w-8 h-8 flex items-center justify-center transition-colors"
                                        >
                                            <i class="fas fa-chevron-left"></i>
                                        </button>
                                        <button 
                                            @click="nextGalleryImage" 
                                            class="bg-black bg-opacity-50 hover:bg-opacity-70 text-white rounded-full w-8 h-8 flex items-center justify-center transition-colors"
                                        >
                                            <i class="fas fa-chevron-right"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="absolute bottom-2 left-0 right-0 flex justify-center space-x-1">
                                        <template x-for="(_, index) in currentBook?.gallery" :key="index">
                                            <button 
                                                @click="currentGalleryIndex = index" 
                                                class="w-2 h-2 rounded-full transition-colors"
                                                :class="currentGalleryIndex === index ? 'bg-white' : 'bg-gray-400'"
                                            ></button>
                                        </template>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-5 gap-2 mt-2">
                                    <template x-for="(img, index) in currentBook?.gallery" :key="index">
                                        <button 
                                            @click="currentGalleryIndex = index" 
                                            class="rounded-md overflow-hidden aspect-square"
                                            :class="currentGalleryIndex === index ? 'ring-2 ring-primary-500' : ''"
                                        >
                                            <img :src="img" class="w-full h-full object-cover" alt="Gallery thumbnail">
                                        </button>
                                    </template>
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            <div>
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-2">
                                        <span 
                                            class="px-2 py-1 text-xs rounded-full font-medium"
                                            :class="{
                                                'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200': currentBook?.status === 'Completed',
                                                'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200': currentBook?.status === 'Ongoing',
                                                'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200': currentBook?.status === 'Hiatus'
                                            }"
                                            x-text="currentBook?.status"
                                        ></span>
                                        <span 
                                            x-show="currentBook?.genre" 
                                            class="px-2 py-1 text-xs rounded-full font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"
                                            x-text="currentBook?.genre"
                                        ></span>
                                        <span 
                                            x-show="currentBook?.chapterNumber" 
                                            class="px-2 py-1 text-xs rounded-full font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"
                                        >
                                            <i class="fas fa-list-ol mr-1"></i>
                                            <span x-text="'Ch. ' + currentBook?.chapterNumber"></span>
                                        </span>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button 
                                            @click="openEditModal(currentIndex); showDetailModal = false" 
                                            class="text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300"
                                        >
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button 
                                            @click="deleteBook(currentIndex)" 
                                            class="text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300"
                                        >
                                            <i class="fas fa-trash-alt"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Source Link -->
                                <div x-show="currentBook?.source" class="mb-4">
                                    <h4 class="font-medium mb-1">Source</h4>
                                    <a 
                                        :href="currentBook?.source" 
                                        target="_blank" 
                                        class="text-primary-600 dark:text-primary-400 hover:underline flex items-center"
                                    >
                                        <i class="fas fa-external-link-alt mr-2"></i>
                                        <span x-text="currentBook?.source"></span>
                                    </a>
                                </div>
                                
                                <!-- Description -->
                                <div class="mb-4">
                                    <h4 class="font-medium mb-1">Description</h4>
                                    <p class="text-gray-700 dark:text-gray-300" x-text="currentBook?.description || 'No description available.'"></p>
                                </div>
                                
                                <!-- Book Data File -->
                                <div x-show="currentBook?.bookDataFile" class="mb-4">
                                    <h4 class="font-medium mb-1">Book Data File</h4>
                                    <div class="flex items-center bg-gray-100 dark:bg-gray-700 p-3 rounded-lg">
                                        <i class="fas mr-2" :class="currentBook?.bookDataFile.type.includes('pdf') ? 'fa-file-pdf text-red-500' : 'fa-file-alt text-blue-500'"></i>
                                        <span x-text="currentBook?.bookDataFile.name"></span>
                                        <a 
                                            :href="currentBook?.bookDataFile.data" 
                                            download 
                                            class="ml-auto text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300"
                                        >
                                            <i class="fas fa-download"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bulk Upload Mapping Modal -->
        <div 
            x-show="showBulkModal" 
            class="fixed inset-0 z-50 overflow-y-auto"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
        >
            <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
                <div 
                    @click="showBulkModal = false" 
                    class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75 dark:bg-gray-900 dark:bg-opacity-75"
                ></div>

                <div 
                    class="inline-block w-full max-w-5xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white dark:bg-gray-800 rounded-lg shadow-xl"
                >
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-medium">Match Books with Media</h3>
                        <button @click="showBulkModal = false" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <p class="mb-4 text-gray-600 dark:text-gray-400">Assign poster images, gallery images, and book data files to your books before importing them.</p>
                    
                    <div class="overflow-y-auto max-h-[60vh]">
                        <template x-for="(mapping, index) in bulkMappings" :key="index">
                            <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-4 mb-4">
                                <div class="flex flex-col md:flex-row gap-4">
                                    <!-- Book Info -->
                                    <div class="flex-1">
                                        <h4 class="font-medium mb-2" x-text="mapping.book.name"></h4>
                                        <div class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                                            <span x-text="mapping.book.status || 'No status'"></span>
                                            <span x-show="mapping.book.genre"> • <span x-text="mapping.book.genre"></span></span>
                                            <span x-show="mapping.book.chapterNumber"> • Ch. <span x-text="mapping.book.chapterNumber"></span></span>
                                        </div>
                                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-4 line-clamp-2" x-text="mapping.book.description || 'No description'"></p>
                                    </div>
                                    
                                    <!-- Poster Selection -->
                                    <div class="w-full md:w-64">
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Poster Image</label>
                                        <div class="flex items-center space-x-3">
                                            <div class="w-16 h-20 bg-gray-200 dark:bg-gray-600 rounded overflow-hidden flex items-center justify-center">
                                                <template x-if="mapping.poster">
                                                    <img :src="mapping.poster" class="w-full h-full object-cover" alt="Selected poster">
                                                </template>
                                                <template x-if="!mapping.poster">
                                                    <i class="fas fa-image text-gray-400 text-xl"></i>
                                                </template>
                                            </div>
                                            <div class="flex-1">
                                                <select 
                                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                                    @change="mapping.poster = $event.target.value"
                                                >
                                                    <option value="">No poster</option>
                                                    <template x-for="poster in bulkPosters" :key="poster.name">
                                                        <option :value="poster.data" x-text="poster.name"></option>
                                                    </template>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Gallery Selection -->
                                    <div class="w-full md:w-64">
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Gallery Images</label>
                                        <select 
                                            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                            multiple
                                            size="3"
                                            @change="
                                                mapping.gallery = Array.from($event.target.selectedOptions).map(option => option.value);
                                            "
                                        >
                                            <template x-for="gallery in bulkGallery" :key="gallery.name">
                                                <option :value="gallery.data" x-text="gallery.name"></option>
                                            </template>
                                        </select>
                                    </div>
                                    
                                    <!-- Book Data Selection -->
                                    <div class="w-full md:w-64">
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Book Data File</label>
                                        <select 
                                            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700"
                                            @change="
                                                const selectedIndex = $event.target.selectedIndex - 1;
                                                if (selectedIndex >= 0) {
                                                    mapping.bookDataFile = bookData[selectedIndex];
                                                } else {
                                                    mapping.bookDataFile = null;
                                                }
                                            "
                                        >
                                            <option value="">No data file</option>
                                            <template x-for="file in bookData" :key="file.name">
                                                <option :value="file.name" x-text="file.name"></option>
                                            </template>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                    
                    <div class="mt-6 flex justify-end space-x-3">
                        <button 
                            @click="showBulkModal = false" 
                            class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-gray-200 dark:bg-gray-700 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none"
                        >
                            Cancel
                        </button>
                        <button 
                            @click="completeBulkUpload" 
                            class="px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none"
                        >
                            Import Books
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 py-6">
            <div class="container mx-auto px-4 text-center text-gray-600 dark:text-gray-400 text-sm">
                <p>Bookshelf Web App &copy; 2023</p>
            </div>
        </footer>
    </div>

    <!-- Alpine.js -->
    <script src="https://unpkg.com/alpinejs@3.10.3/dist/cdn.min.js" defer></script>
</body>
</html>
